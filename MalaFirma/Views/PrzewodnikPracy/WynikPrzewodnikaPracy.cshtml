@model PrzewodnikPracyVM
@{
    <partial name="_Notification" />
};
<form method="post">
    <div class="container p-3">
        <div class="card shadow mb-4" style="margin:15px">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">@(Model.PrzewodnikPracy.WynikPrzewodnika != null ? "Edycja wyniku przewodnika" : "Zakończ przewodnik")</h6>
            </div>
            <div class="card-body">
                <input asp-for="PrzewodnikPracy.Id" hidden />
                <input asp-for="PrzewodnikPracy.NumerPrzewodnika" hidden />
                <input asp-for="PrzewodnikPracy.WymaganieId" hidden />
                <input asp-for="PrzewodnikPracy.Rysunek" hidden />
                <input asp-for="PrzewodnikPracy.NumerRysunku" hidden />
                <input asp-for="SwiadectwoJakosci.WynikSwiadectwa" id="wynik" hidden />
                <div class="mb-3">
                    <label>Wynik przewodnika</label>
                    <input asp-for="PrzewodnikPracy.WynikPrzewodnika" class="form-control" />
                </div>
                <div class="mb-3">
                    <label>Zidentyfikowane problemy</label>
                    <input asp-for="PrzewodnikPracy.ZidentyfikowaneProblemy" class="form-control" />
                </div>
                <div class="mb-3">
                    <label>Planowane działania</label>
                    <input asp-for="PrzewodnikPracy.PlanowaneDzialania" class="form-control" />
                </div>
                @if (Model.PrzewodnikPracy.WynikPrzewodnika != null)
                {
                    <div class="mb-3">
                        <label>Data zakończenia przewodnika</label>
                        <input asp-for="PrzewodnikPracy.DataZakonczeniaPrzewodnika" class="form-control" />
                    </div>
                }
                @if (Model.PrzewodnikPracy.WynikPrzewodnika != null)
                {
                    <button type="submit" class="btn btn-info">Edytuj</button>
                }
                else
                {
                    <button type="submit" id="zakoncz" hidden class="btn btn-info">Zakończ przewodnik</button>
                    <button onclick="return ValidateInput()" class="btn btn-info">Zakończ przewodnik</button>
                }
                <a asp-controller="PrzewodnikPracy" asp-action="PrzewodnikPracy" asp-route-id="@Model.PrzewodnikPracy.Id" class="btn btn-primary">
                    <i class="bi bi-arrow-90deg-left"></i> Wróć do przewodnika
                </a>
            </div>
        </div>
    </div>
</form>


@section Scripts{
    @{

    }
<script>

function ValidateInput(){
    if(document.getElementById("wynik").value==""){
        Swal.fire({
  title: 'Zakończyć przewodnik?',
  icon: 'question',
  showCancelButton: true,
  confirmButtonColor: '#3085d6',
  cancelButtonColor: '#d33',
  cancelButtonText: 'Nie',
  confirmButtonText: 'Tak'
}).then((result) => {
  if (result.isConfirmed) {
      Swal.fire(
      'Zakończono!',
      'Przewodnik został pomyślnie zakończony.',
      'success'
    )
    document.getElementById("zakoncz").click();
  }
});
    return false;
    }
    return true;
}


</script>

}

